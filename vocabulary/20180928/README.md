# 2018/09/28 vocabulary
Vocabulary|Definition
----------|----------
striping|切分
span|延展
error correction code|錯誤修正碼
parity|奇偶校驗
redundant|冗餘
inexpensive|廉價
independent|獨立
duplexing|相互
interleaving|交叉
disk Striping|硬碟分割
data striping|數據分割/條帶化
redundant array of independent disks|磁碟陣列

# Data striping
- 當多個進程同時訪問一個磁盤時，可能會出現磁盤衝突
- 大多數磁盤系統都對訪問次數（每秒的I/O 操作，IOPS）和數據傳輸率（每秒傳輸的數據量，TPS）有限制
	- 當達到這些限制時，後面需要訪問磁盤的進程就需要等待，這時就是所謂的磁盤衝突
- 避免磁盤衝突是優化I/O 性能的一個重要目標，而I/O 性能的優化與其他資源（如CPU和內存）的優化有著很大的區別,I/O 優化最有效的手段是將I/O 最大限度的進行平衡
- 條帶化技術就是一種自動的將I/O 的負載均衡到多個物理磁盤上的技術，條帶化技術就是將一塊連續的數據分成很多小部分並把他們分別存儲到不同磁盤上去
	- 這就能使多個進程同時訪問數據的多個不同部分而不會造成磁盤衝突，而且在需要對這種數據進行順序訪問的時候可以獲得最大程度上的I/O 並行能力，從而獲得非常好的性能
	- 由於條帶化在I/O 性能問題上的優越表現，以致於在應用系統所在的計算環境中的多個層次或平台都涉及到了條帶化的技術，如操作系統和存儲系統這兩個層次中都可能使用條帶化技術

# Parity(奇偶校驗)
- 奇偶校驗位（parity bit）或校驗位元（check bit）是一個表示給定位數的二進位數中1的個數是奇數還是偶數的二進位數
- 奇偶校驗位是最簡單的錯誤檢測碼
- 奇偶校驗位有兩種類型：偶校驗位與奇校驗位
	- 如果給定一組數據位中1的個數是奇數，那麼偶校驗位就置為1，從而使得1的個數是偶數
	- 如果給定一組數據位中1的個數是偶數，那麼奇校驗位就置為1，從而使得1的個數是奇數
- 奇偶校驗位是一種錯誤檢測碼，但是由於沒有辦法確定哪一位出錯，所以它不能進行錯誤校正，因此發生錯誤時必須扔掉全部的數據，然後從頭開始傳輸數據

# RAID(Redundant Arrays of Independent Disks)
- 把多個硬碟集合起來，組成一個磁碟群組，透過不同RAID機制，讓RAID磁碟陣列可以達到儲存更快速或更運作更安全等目的
	- 一般來說，RAID把多個硬碟組合成為一個邏輯磁區
	- RAID的應用大部分會在比較重要的伺服器、網路主機或執行重要工作的電腦中，並且常使用完全相同的硬碟作為組合，一般使用者的電腦比較少會用到RAID磁碟陣列
	- RAID的目的在於將相同的資料儲存在多個磁碟機中不同的地方，並且改善儲存子系統的效能
	- RAID的優點為提供更好的生產力效能及/或資料錯誤容忍度
	- 透過將工作量平行分散到多個實體磁碟機中可以達到較好的效能
	- 而藉由資料多重操作，當一個 (或多個) 磁碟機或磁區發生問題時，可以在另一個磁碟機中找到資料的映射拷貝，則可達到錯誤容忍度

# JBOD（Just a Bunch Of Disks）
- 在某些分類上，JBOD並不算是RAID的等級
	- 只是將多個磁碟空間合併成一個大的邏輯磁碟，不具有錯誤備援機制
- 資料的存放機制是由第一顆磁碟開始依序往後存放，即作業系統看到的是一個大磁碟（由許多小磁碟組成）
	- 因此如果磁碟損毀，則該顆硬碟上的所有資料將無法救回
	- 而若第一顆硬碟損壞，通常無法作救援（因大部分檔案系統將檔案表存在磁碟前端，即第一顆），失去檔案表即失去一切資料
<img src="https://github.com/tom750407/Oracle/blob/master/vocabulary/20180928/src/JBOD.jpg" height="200px">

# RAID 0
- Striping/Span (切分/延展) RAID 0，它是將資料儲存在2個以上的硬碟機，並將全部磁碟機的儲存容量合併，藉由將資料切分到全部的磁碟機上，進行平行讀寫，而達到提高效能增加容量
	- 缺點是完全沒有容錯能力，只要有一個磁碟故障，就會導致陣列磁碟的所有資料，毀於一旦無法挽回
- 理論上越多的磁碟效能就等於[單一磁碟效能]×[磁碟數]，但實際上受限於匯流排I/O限制及其它因素的影響，RAID 效能會隨邊際遞減，也就是說，假設一個磁碟的效能是50MB／秒，兩個磁碟的RAID 0效能約96MB／秒，三個磁碟的RAID 0也許是130MB／秒而不是150MB／秒
	- 兩個磁碟的RAID 0最能明顯感受到效能的提升
	- 但如果是以軟體方式來實作RAID，則磁碟的空間則不見得受限於此（例如Linux Software RAID），透過軟體實作可以經由不同的組合而善用所有的磁碟空間
<img src="https://github.com/tom750407/Oracle/blob/master/vocabulary/20180928/src/RAID%200.jpg" height="200px">

# RAID 1
RAID 1，必須由2個以上的硬碟所組成，由磁碟陣列(RAID)來控制，將資料同時寫入第1個與第2個硬碟，其2組硬碟上的資料完全相同，也就是其中一個硬碟是用來作備份用途
	- 當其中有一個硬碟故障時，系統照常運作正常
- RAID 1是所有RAID階層上，經濟效益最好，效能很高，極佳的資料安全性，是所有階層中使用最多最廣最符合當初RAID設計概念的一種
	- 唯一小缺點是，其陣列磁碟容量是全部硬碟容量的一半，是所有RAID上磁碟利用率最低的一個級別
<img src="https://github.com/tom750407/Oracle/blob/master/vocabulary/20180928/src/RAID%201.jpg" height="200px">

# RAID 2
- 這是RAID 0的改良版，以漢明碼（Hamming Code）的方式將資料進行編碼後分割為獨立的位元，並將資料分別寫入硬碟中
	- 因為在資料中加入了錯誤修正碼（ECC，Error Correction Code），所以資料整體的容量會比原始資料大一些，RAID2最少要三台磁碟機方能運作
- RAID 2分散至各磁碟機的資料單位為位元，而非RAID 0的大區塊式
	- RAID 2將資料的第一個位元存放於陣列的第一顆磁碟機，第二個位元存放於陣列的第二顆磁碟機，以此類推，因此同樣可提昇資料的存取效率
	- 與RAID 0相較下，由於RAID 2是以位元為分散單位所以每次讀寫動作都將牽引陣列內所有的磁碟機同時讀寫
<img src="https://github.com/tom750407/Oracle/blob/master/vocabulary/20180928/src/RAID%202.jpg" height="200px">

# RAID 3
- RAID 3，最少須3個硬碟或以上，這個階層的磁碟陣列具備了同位元高階智慧型演算法，利用一個硬碟來儲存其運算出來的同位元值的資料
- 當陣列磁碟中有一個硬碟發生故障時(當然不能是同位元碟)，只要換上新硬碟後，磁碟陣列控制器就能利用同位元碟的資料，重新演算得到其舊有資料並回寫建立
	- 因為其同位元檢查資料是將資料切割成數個區段，利用XOR演算法計算 出同位元資料
	- 而其區段以Bytes計算時，稱為RAID 3，如果是以Block計算時，就稱為RAID 4
	- 所以RAID 3在整體讀寫效能會 較慢較差，但在成本上會比RAID 0+1還省一點，其陣列磁碟整體容量計算公式為N-1
<img src="https://github.com/tom750407/Oracle/blob/master/vocabulary/20180928/src/RAID%203.jpg" height="200px">

# RAID 4
- 它與RAID 3不同的是它在分割時是以區塊為單位分別存在硬碟中
	- 但每次的資料存取都必須從同位元檢查的那個硬碟中取出對應的同位元資料進行核對
	- 由於過於頻繁的使用，所以對硬碟的損耗可能會提高
- RAID 4集合RAID 0、2、3的優點，將分散於各磁碟機的資料區塊長度提昇為作業系統層次的傳輸單位，如磁區或磁串
	- 因此每次寫入任一部磁碟機的區塊長度即是一整個磁區或磁串，RAID 4也另外設置一部專職的磁碟機儲存錯誤修正資訊
<img src="https://github.com/tom750407/Oracle/blob/master/vocabulary/20180928/src/RAID%204.jpg" height="200px">

# RAID 5
- RAID 5是一種儲存效能、資料安全和儲存成本兼顧的儲存解決方案
	- 它使用的是Disk Striping（硬碟分割）技術
- RAID 5 至少需要三顆硬碟， RAID 5不對儲存的資料進行備份，而是把資料和相對應的奇偶校驗資訊儲存到組成RAID5的各個磁碟上，並且奇偶校驗資訊和相對應的資料分別儲存於不同的磁碟上
	- 當RAID5的一個磁碟資料發生損壞後，利用剩下的資料和相應的奇偶校驗資訊去恢復被損壞的資料
	- RAID 5可以理解為是RAID 0和RAID 1的折衷方案
	- RAID 5可以為系統提供資料安全保障，但保障程度要比鏡像低而磁碟空間利用率要比鏡像高
- RAID 5具有和RAID 0相近似的資料讀取速度，只是多了一個奇偶校驗資訊，寫入資料的速度相當的慢，若使用「回寫快取」可以讓效能改善不少
	- 同時由於多個資料對應一個奇偶校驗資訊，RAID 5的磁碟空間利用率要比RAID 1高，儲存成本相對較便宜
- RAID 5可允許同時進行多個寫入的動作，可增加效率，但在存取大檔案及連續的資料時，必需重新計算同位檢測資訊，會降低執行效率
	- RAID 5的容錯能力很高
<img src="https://github.com/tom750407/Oracle/blob/master/vocabulary/20180928/src/RAID%205.jpg" height="200px">

# RAID 6
- 與RAID 5相比，RAID 6增加了第二個獨立的奇偶校驗資訊塊
	- 兩個獨立的奇偶系統使用不同的演算法，資料的可靠性非常高，即使兩塊磁碟同時失效也不會影響資料的使用
- RAID 6需要分配給奇偶校驗資訊更大的磁碟空間，相對於RAID 5有更大的「寫損失」，因此「寫效能」非常差
	- 較差的效能和複雜的實作方式使得RAID 6很少得到實際應用
- 同一陣列中最多容許兩個磁碟損壞。更換新磁碟後，資料將會重新算出並寫入新的磁碟中
	- 依照設計理論，RAID 6必須具備四個以上的磁碟才能生效
<img src="https://github.com/tom750407/Oracle/blob/master/vocabulary/20180928/src/RAID%206.jpg" height="200px">

# RAID 10/01
- RAID 10/01其實可細分為RAID 1+0或RAID 0+1
- RAID 1+0
	- 先鏡射再分割資料
	- 將所有硬碟分為兩組，視為是RAID 0的最低組合，然後將這兩組各自視為RAID 1運作
	- RAID 1+0有著不錯的讀取速度，而且擁有比RAID 0更高的資料保護性
- RAID 0+1
	- 先分割再將資料鏡射到兩組硬碟
	- 它將所有的硬碟分為兩組，變成RAID 1的最低組合，而將兩組硬碟各自視為RAID 0運作
	- RAID 0+1比起RAID 1+0有著更快的讀寫速度，不過也多了一些會讓整個硬碟組停止運轉的機率
	- 只要同一組的硬碟全部損毀，RAID 0+1就會停止運作，而RAID 1+0則可以在犧牲RAID 0的優勢下正常運作
- RAID 10巧妙的利用了RAID 0的速度以及RAID 1的保護兩種特性，不過它的缺點是需要的硬碟數較多，因為至少必須擁有四個以上的偶數硬碟才能使用  
<img src="https://github.com/tom750407/Oracle/blob/master/vocabulary/20180928/src/RAID%201+0.jpg" height="200px"><img src="https://github.com/tom750407/Oracle/blob/master/vocabulary/20180928/src/RAID%200+1.jpg" height="200px">
