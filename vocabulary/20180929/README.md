# 2018/09/29 vocabulary
Vocabulary|Definition
----------|----------

# 備份(backup)
- 按備份系統的準備程度，可將其分為冷備份、溫備份和熱備份三大類:
	- 冷備份(cold backup)
	- 溫備份(warm backup)
	- 熱備份(hot backup)

### 冷備份
- 備份系統未安裝或未配置成與當前使用的系統相同或相似的運行環境，應用系統數據沒有及時裝入備份系統
- 一旦發生災難，需安裝配置所需的運行環境，用數據備份介質(磁帶或光碟) 恢復應用數據，手工逐筆或自動批量追補孤立數據，將終端用戶通過通訊線路切換到備份系統，恢復業務運行
- 優點: 設備投資較少，節省通信費用，通信環境要求不高
- 缺點: 恢復時間較長，一般要數天至1週，數據完整性與一致性較差

### 溫備份
- 將備份系統已安裝配置成與當前使用的系統相同或相似的系統和網絡運行環境，安裝應用系統業務定期備份數據
- 一旦發生災難，直接使用定期備份數據，手工逐筆或自動批量追補孤立數據或將終端用戶通過通訊線路切換到備份系統，恢復業務運行
- 優點: 設備投資較少，通信環境要求不高
- 缺點: 恢復時間長，一般要十幾個小時至數天，數據完整性與一致性較差

### 熱備份
- 備份處於聯機狀態，當前應用系統通過高速通信線路將數據實時傳送到備份系統，保持備份系統與當前應用系統數據的同步，也可定時在備份系統上恢復應用系統的數據
- 一旦發生災難，不用追補或只需追補很少的孤立數據，備份系統可快速接替生產系統運行，恢復營業
- 優點: 恢復時間短，一般幾十分鐘到數小時，數據完整性與一致性最好，數據丟失可能性最小
- 缺點: 設備投資大，通信費用高，通信環境要求高，平時運行管理較複雜

# 在計算機服務器備份和恢復中
- 冷備份服務器(cold server)
	- 在主服務器丟失的情況下才使用的備份服務器
	- 冷備份服務器基本上只在軟件安裝和配置的情況下打開，然後關閉直到需要時再打開
- 溫備份服務器(warm server)
	- 一般都是周期性開機，根據主服務器內容進行更新，然後關機
	- 經常用溫備份服務器來進行複制和鏡像操作
- 熱備份服務器(hot server)
	- 時刻處於開機狀態，同主機保持同步
	- 當主機失靈時，可以隨時啟用熱備份服務器來代替

# Oracle熱備份和冷備份的區別以及優點
### Oracle冷備份
- 冷備份發生在數據庫已經正常關閉的情況下，當正常關閉時會提供給我們一個完整的數據庫
- 對於備份Oracle信息而言，冷備份時最快和最安全的方法
- 優點
	- 是非常快速的備份方法（只需拷文件）
	- 容易歸檔（簡單拷貝即可）
	- 容易恢復到某個時間點上（只需將文件再拷貝回去）
	- 能與歸檔方法相結合，做數據庫“最佳狀態”的恢復
	- 低度維護，高度安全
- 缺點
	- 單獨使用時，只能提供到“某一時間點上”的恢復
	- 再實施備份的全過程中，數據庫必須要作備份而不能作其他工作，也就是說，在冷備份過程中，數據庫必須是關閉狀態
	- 若磁盤空間有限，只能拷貝到磁帶等其他外部存儲設備上，速度會很慢
	- 不能按表或按用戶恢復
- 如果可能的話（主要看效率），應將信息備份到磁盤上，然後啟動數據庫（使用戶可以工作）並將備份的信息拷貝到磁帶上（拷貝的同時，數據庫也可以工作）
- 冷備份中必須拷貝的文件包括
	- 所有數據文件
	- 所有控制文件
	- 所有聯機REDO LOG文件
	- Init.ora文件（可選）
- 值得注意的使冷備份必須在數據庫關閉的情況下進行，當數據庫處於打開狀態時，執行數據庫文件系統備份是無效的
- 冷備份的例子
	- 關閉數據庫
		- sqlplus /nolog
		- sql>connect /as sysdba
		- sql>shutdown normal;
	- 用拷貝命令備份全部的數據文件、重做日志文件、控制文件、初始化參數文件
		- sql>cp
	- 重啟Oracle數據庫
		- sql>startup

### Oracle熱備份
- 熱備份是在數據庫運行的情況下，采用archivelog mode方式備份數據庫的方法
	- 所以，如果你有昨天夜裡的一個冷備份而且又有今天的熱備份文件，在發生問題時，就可以利用這些資料恢復更多的信息
- 熱備份要求數據庫在Archivelog方式下操作，並需要大量的檔案空間
	- 一旦數據庫運行在archivelog狀態下，就可以做備份了
- 熱備份的命令文件由三部分組成：
	- 數據文件一個表空間一個表空間的備份
		- 設置表空間為備份狀態
		- 備份表空間的數據文件
		- 回復表空間為正常狀態
	- 備份歸檔log文件
		- 臨時停止歸檔進程
		- log下那些在archive rede log目標目錄中的文件
		- 重新啟動archive進程
		- 備份歸檔的redo log文件
	- 用alter database bachup controlfile命令來備份控制文件
- 優點
	- 可在表空間或數據庫文件級備份，備份的時間短
	- 備份時數據庫仍可使用
	- 可達到秒級恢復（恢復到某一時間點上）
	- 可對幾乎所有數據庫實體做恢復
	- 恢復是快速的，在大多數情況下愛數據庫仍工作時恢復
- 缺點
	- 不能出錯，否則後果嚴重
	- 若熱備份不成功，所得結果不可用於時間點的恢復
	- 因難於維護，所以要特別仔細小心，不允許以失敗告終
